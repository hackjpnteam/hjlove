<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»åƒãƒ†ã‚¹ãƒˆ - æ€§åˆ¥åˆ¤å®šã‚¢ã‚¤ã‚³ãƒ³</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
        }
        .nav-header {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .nav-link {
            display: inline-block;
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        .nav-link:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        .test-card {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
        }
        .test-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px;
            border: 3px solid #f0f0f0;
        }
        .test-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .test-gender {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        .test-occupation {
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
        }
        .image-info {
            margin-top: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-header" id="navHeader">
            <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </div>
        
        <h1>ğŸ§ª ç”»åƒãƒ»æ€§åˆ¥åˆ¤å®šãƒ†ã‚¹ãƒˆ</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            å®Ÿéš›ã®ç”»åƒãŒåˆ©ç”¨ã§ããªã„å ´åˆã®æ€§åˆ¥åˆ¤å®šã‚¢ã‚¤ã‚³ãƒ³ã®è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        </p>
        
        <div class="test-grid" id="testGrid"></div>
    </div>

    <script>
        let currentUser = null;

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadCurrentUser();
            generateNavigation();
        });

        // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
        function loadCurrentUser() {
            try {
                const stored = localStorage.getItem('currentUser');
                if (stored) {
                    currentUser = JSON.parse(stored);
                }
            } catch (error) {
                console.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•çš„ã«ç”Ÿæˆ
        function generateNavigation() {
            const navHeader = document.getElementById('navHeader');
            
            if (currentUser) {
                // ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
                navHeader.innerHTML = `
                    <a href="index.html" class="nav-link">ğŸ  ãƒ›ãƒ¼ãƒ </a>
                    <a href="timeline.html" class="nav-link">ğŸ“ˆ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</a>
                    <a href="community.html" class="nav-link">ğŸ‘¥ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
                    <a href="profile-create.html" class="nav-link">â• ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆ</a>
                    <a href="my-page.html" class="nav-link">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
                    <a href="test-images.html" class="nav-link" style="background: #667eea; color: white;">ğŸ§ª ç”»åƒãƒ†ã‚¹ãƒˆ</a>
                    <span class="nav-link" style="background: rgba(255,255,255,0.1); cursor: default;">ğŸ‘‹ ${currentUser.name || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'}</span>
                    <a href="#" class="nav-link" onclick="logout()" style="background: rgba(255,69,58,0.8);">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
                `;
            } else {
                // æœªãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
                navHeader.innerHTML = `
                    <a href="index.html" class="nav-link">ğŸ  ãƒ›ãƒ¼ãƒ </a>
                    <a href="timeline.html" class="nav-link">ğŸ“ˆ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</a>
                    <a href="community.html" class="nav-link">ğŸ‘¥ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
                    <a href="login.html" class="nav-link">ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</a>
                    <a href="profile-create.html" class="nav-link">â• ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆ</a>
                    <a href="test-images.html" class="nav-link" style="background: #667eea; color: white;">ğŸ§ª ç”»åƒãƒ†ã‚¹ãƒˆ</a>
                `;
            }
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
        function logout() {
            if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        }

        // è©³ç´°ãªæ€§åˆ¥æ¨å®šæ©Ÿèƒ½
        function estimateGender(name, occupation = '') {
            if (!name) return 'unknown';
            
            // ç”·æ€§ã‚’ç¤ºå”†ã™ã‚‹æ–‡å­—ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³
            const maleIndicators = [
                'å¤ªéƒ', 'ä¸€éƒ', 'äºŒéƒ', 'ä¸‰éƒ', 'å…‰', 'å¥', 'èª ', 'æ´‹', 'åš', 'é›„', 'ç”·', 'å¤«', 'å½¦', 
                'ä»‹', 'åŠ©', 'æœ—', 'è¼', 'å¤§', 'ç¿”', 'éš†', 'æ˜', 'æ­£', 'å’Œ', 'æ¸…', 'æ­¦', 'å®Ÿ', 'æ²»', 
                'Taro', 'Hikaru', 'Takeshi', 'Hiroshi'
            ];
            
            // å¥³æ€§ã‚’ç¤ºå”†ã™ã‚‹æ–‡å­—ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³
            const femaleIndicators = [
                'å­', 'ç¾', 'æµ', 'é¦™', 'å¥ˆ', 'èœ', 'èŠ±', 'è¯', 'æ„›', 'å½©', 'å’²', 'åƒ', 'æ²™', 'ç´—',
                'é‡Œ', 'ç†', 'çµµ', 'æ±Ÿ', 'ä»£', 'ä¸–', 'ç”±', 'ä½³', 'åŠ ', 'éº»', 'çœŸ', 'å„ª', 'èˆ', 'è‘‰',
                'ã¡ã‹', 'ã‚ã‚„ã‹', 'ã¯ãªã“', 'ã¿ã‹', 'ã‚†ã‹', 'Ayaka', 'Chika', 'Hanako'
            ];

            // è·æ¥­ã‹ã‚‰ã®æ¨å®šè£œåŠ©
            const maleOccupations = ['ç¤¾é•·', 'CEO', 'CTO', 'éƒ¨é•·', 'èª²é•·', 'ä¸»ä»»', 'å–ç· å½¹', 'ä»£è¡¨'];
            const femaleOccupations = ['çœ‹è­·å¸«', 'ä¿è‚²å£«', 'å—ä»˜', 'CA'];

            // åå‰ã§ã®åˆ¤å®š
            for (let indicator of maleIndicators) {
                if (name.includes(indicator)) return 'male';
            }
            
            for (let indicator of femaleIndicators) {
                if (name.includes(indicator)) return 'female';
            }

            // è·æ¥­ã§ã®è£œåŠ©åˆ¤å®š
            if (occupation) {
                for (let occ of maleOccupations) {
                    if (occupation.includes(occ)) return 'male';
                }
                for (let occ of femaleOccupations) {
                    if (occupation.includes(occ)) return 'female';
                }
            }
            
            return 'unknown';
        }

        function generateGenderIcon(name, gender, occupation = '') {
            if (gender === 'unknown') {
                gender = estimateGender(name, occupation);
            }

            const gradients = {
                male: ['4A90E2', '357ABD'],     
                female: ['E91E63', 'AD1457'],   
                unknown: ['9E9E9E', '616161']   
            };

            // çµµæ–‡å­—ã‚’ä½¿ã‚ãšã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã«å¤‰æ›´
            const icons = {
                male: 'M',      // Male
                female: 'F',    // Female
                unknown: '?'    // Unknown
            };

            const labels = {
                male: 'ç”·æ€§',
                female: 'å¥³æ€§', 
                unknown: 'ä¸æ˜'
            };

            const colors = gradients[gender] || gradients.unknown;
            const icon = icons[gender] || icons.unknown;
            const label = labels[gender] || labels.unknown;
            
            const displayName = name.length > 4 ? name.substring(0, 3) + '...' : name;
            
            return {
                url: `https://via.placeholder.com/300x300/${colors[0]}/ffffff?text=${encodeURIComponent(icon + ' ' + displayName)}`,
                gender: gender,
                icon: icon,
                label: label,
                color: colors[0]
            };
        }

        // ãƒ†ã‚¹ãƒˆç”¨ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿
        const testProfiles = [
            { name: "åœ’ç”°å½©æ›", occupation: "æ—©ç¨²ç”°å¤§å­¦å¤§å­¦é™¢M2", realImage: "ayaka/profile.jpg" },
            { name: "ä¸Šæ—ã¡ã‹", occupation: "ãƒ—ãƒ«ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ç”Ÿå‘½ ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼", realImage: null },
            { name: "æˆ¸æ‘å…‰", occupation: "é€£ç¶šèµ·æ¥­å®¶ãƒ»Forbeså…¬å¼ã‚³ãƒ©ãƒ ãƒ‹ã‚¹ãƒˆ", realImage: null },
            { name: "ç”°ä¸­å¤ªéƒ", occupation: "å–¶æ¥­éƒ¨é•·", realImage: null },
            { name: "å±±ç”°èŠ±å­", occupation: "ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼", realImage: null },
            { name: "ä½è—¤å¥", occupation: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", realImage: null },
            { name: "éˆ´æœ¨ç¾å’²", occupation: "ãƒãƒ¼ã‚±ã‚¿ãƒ¼", realImage: null },
            { name: "é«˜æ©‹é›„ä»‹", occupation: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼", realImage: null },
            { name: "æ¸¡è¾ºå„ªå­", occupation: "çœ‹è­·å¸«", realImage: null },
            { name: "ä¸­æ‘èª ", occupation: "CEO", realImage: null },
            { name: "æ—éº»è¡£", occupation: "å—ä»˜", realImage: null },
            { name: "æ£®ç”°å¤§è¼”", occupation: "å–ç· å½¹", realImage: null }
        ];

        function createTestCard(profile) {
            const gender = estimateGender(profile.name, profile.occupation);
            const genderData = generateGenderIcon(profile.name, gender, profile.occupation);
            
            // å®Ÿéš›ã®ç”»åƒãŒã‚ã‚‹ã‹ãƒ†ã‚¹ãƒˆ
            const imageUrl = profile.realImage || genderData.url;
            const imageType = profile.realImage ? 'å®Ÿéš›ã®ç”»åƒ' : 'è‡ªå‹•ç”Ÿæˆã‚¢ã‚¤ã‚³ãƒ³';
            return `
                <div class="test-card">
                    <img src="${imageUrl}" alt="${profile.name}" class="test-image" 
                         onerror="this.src='${genderData.url}'"
                         style="border-color: #${genderData.color}">
                    <div class="test-name">${profile.name} <span style="color: #${genderData.color}; font-weight: bold;">${genderData.label}</span></div>
                    <div class="test-gender">åˆ¤å®š: ${genderData.icon} (${genderData.label})</div>
                    <div class="test-occupation">${profile.occupation}</div>
                    <div class="image-info">
                        ç”»åƒ: ${imageType}<br>
                        åˆ¤å®šçµæœ: ${gender}<br>
                        ã‚¢ã‚¤ã‚³ãƒ³: ${genderData.icon}
                    </div>
                </div>
            `;
        }

        // ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
        const testGrid = document.getElementById('testGrid');
        testGrid.innerHTML = testProfiles.map(profile => createTestCard(profile)).join('');
    </script>
</body>
</html>